我们在实际开发工作中离不开数据库，当用到数据库时又不得不提索引，而索引在数据库中是不可或缺的。但索引具体是怎么实现的呢？又是如何起作用的呢？这篇文章主要探讨这些相关问题。

# 1. 什么是索引
索引（在 MySQL 中也叫做“键（key）”）是存储引擎用于快速找到记录的一种数据结构。这是索引的基本功能。

要理解 MySQL 中索引是如何工作的，最简单的方法就是去看看一本书的“索引”部分：如果想在一本书中找到某个特定主题，一般会先看书的“索引”,找到对应的页码。

在 MySQL 中，存储引擎用类似的方法使用索引，其先在索引中找到对应值，然后根据匹配的索引记录找到对应的数据行。

索引可以包含一个或多个列的值。如果索引包含多个列，那么列的顺序也十分重要，因为 MySQL 只能高效地使用索引的最左前缀列。创建一个包含两个列的索引，和创建两个只包含一列的索引是大不相同的。

# 2. 索引的优点
索引可以让服务器快速地定位到表的指定位置。但是这并不是索引的唯一作用，到目前为止可以看到，根据创建索引的数据结构不同，索引也有一些其他的附加作用。

最常见的 B-Tree 索引，按照顺序存储数据，所以 MySQL 可以用来做 ORDER BY 和 GROUP BY 操作。因为数据是有序的，所以 B-Tree 也就会将相关的列值都存储在一起。最后，因为索引中存储了实际的列值，所以某些查询只使用索引就能够完成全部查询。据此特性，总结下来索引有如下三个优点：
1. 索引大大减少了服务器需要扫描的数据量。
2. 索引可以帮助服务器避免排序和临时表。
3. 索引可以将随机 I/O 变为顺序 I/O。

# 3. 索引的缺点
索引本身也是表，因此会占用存储空间，一般来说，索引表占用的空间是数据表的1.5倍；索引表的维护和创建需要时间成本，这个成本随着数据量增大而增大；构建索引会降低数据表的修改操作（删除，添加，修改）的效率，因为在修改数据表的同时还需要修改索引表。

# 4. 索引的类型
## 4.1 B+Tree 索引
### 4.1.1 定义
B+Tree 是一种多路平衡查找树，是对 B-Tree 的扩展。

一个 m 阶（即：每个节点最多有 m 个键（key））的 B+Tree 满足以下特点:
- 每一个节点最多有 m 个子节点；
- 每一个非叶子节点（除根节点）最少有 ⌈m/2⌉ 个子节点；
- 所有叶子节点所处的高度一样；
- 所有键（key）都会在叶子节点出现；
- 非叶子节点只存储键（key）和指针，只有叶子节点保存数据；
- 键（key）从左到右递增。

### 4.1.2 代码实现

> 树定义

```java
/**
 * B+Tree
 *
 * @author lyh
 * @date 2019/12/25 0025
 **/
public class Tree<K, V> {
    /**
     * 阶数
     */
    private int order;
    /**
     * 根节点
     */
    private Node<K, V> root;
}
```

> 节点定义

```java
/**
 * 节点
 *
 * @author lyh
 * @date 2019/12/25 0025
 **/
public class Node<K, V> {
    /**
     * 父节点
     */
    private Node<K, V> parent;
    /**
     * 前节点
     */
    private Node<K, V> prev;
    /**
     * 后节点
     */
    private Node<K, V> next;
    /**
     * 条目
     */
    private Entry<K, V>[] entries;
}
```

> 条目定义

```
/**
 * 条目
 *
 * @author lyh
 * @date 2019/12/25 0025
 **/
public class Entry<K, V> {
    /**
     * 键
     */
    private K key;
    /**
     * 值
     */
    private V value;
    /**
     * 子节点
     */
    private Node<K, V> child;
}
```

### 4.1.3 结构图

> 用户数据

id | username | birthday
---|---|---
1 | liu | 1999-10-01
2 | zhang | 1993-12-23
3 | li | 1995-09-14
4 | zhao | 1992-05-03
5 | wang | 1997-01-26
6 | sun | 1991-11-18
7 | zhou | 1996-07-30
8 | shi | 1998-06-02
9 | xie | 1999-03-15
10 | xiong | 1994-08-27
11 | xia | 1996-04-19
12 | zhu | 1996-12-09

> 用户索引

![](/images/b-plus-tree.jpg)



## 4.2 Hash 索引
## 4.3 FullText 索引
## 4.4 R-Tree 索引


# 5. 索引的方法
# 6. 索引的语法
# 7. 索引的优化